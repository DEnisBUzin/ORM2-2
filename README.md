# Миграции

## Задание

Есть страница сайта школы.
При создании был неверно выбран тип связи `многие к одному`.
И теперь у ученика есть только один учитель и чтобы добавить к нему второго, требуется
заново добавлять ученика в базу.

Необходимо поменять модели и сделать отношение `многие ко многим` между Учителями и Учащимися.
Это решит проблемы текущей архитектуры.

Задача:

1. Поменять отношения моделей `Student` и `Teacher` с `Foreign key` на `Many to many`.
2. Поправить шаблон списка учеников с учётом изменения моделей.

## Примечание

Сначала примените текущую миграцию, затем загрузите исходные данные с помощью `loaddata` и после этого меняйте модели и делайте новые миграции.

В противном случае `loaddata` не сможет загрузить данные на новую схему и их придётся заносить вручную.

## Дополнительное задание

Проанализируйте число SQL-запросов. Напоминание: для этого можно использовать `django-debug-toolbar`. Для каждого студента будет выполняться отдельный запрос. Это не очень производительное решение — улучшите его с помощью `prefetch_related` 

